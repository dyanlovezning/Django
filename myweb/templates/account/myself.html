{% extends "base.html" %}
{% load staticfiles %}
{% block title %}my information{% endblock %}
{% block content %}
<div class="row text-center vertical-middle-sm">
    <h1>我的信息</h1>
    <div class="row">
        <div class="col-md-6">
            <div class="row">
                <div class="col-md-4 text-right"><p>用户名:</p></div>
                <div class="col-md-8 text-left"><p>{{ user.username }}</p></div>
            </div>
            <div class="row">
                <div class="col-md-4 text-right"><p>邮箱:</p></div>
                <div class="col-md-8 text-left"><p>{{ user.email }}</p></div>
           </div>
           <div class="row">
                <div class="col-md-4 text-right"><p>生日:</p></div>
                <div class="col-md-8 text-left"><p>{{ userprofile.birth }}</p></div>
            </div>
            <div class="row">
                    <div class="col-md-4 text-right"><p>电话:</p></div>
                    <div class="col-md-8 text-left"><p>{{ userprofile.phone }}</p></div>
            </div>    
            <div class="row">
                    <div class="col-md-4 text-right"><p>毕业学校:</p></div>
                    <div class="col-md-8 text-left"><p>{{ userinfo.school }}</p></div>
            </div>
            <div class="row">
                    <div class="col-md-4 text-right"><p>用户名:</p></div>
                    <div class="col-md-8 text-left"><p>{{ userinfo.company }}</p></div>
            </div>
            <div class="row">
                    <div class="col-md-4 text-right"><p>职业:</p></div>
                    <div class="col-md-8 text-left"><p>{{ userinfo.profession }}</p></div>
            </div>
            <div class="row">
                    <div class="col-md-4 text-right"><p>地址:</p></div>
                    <div class="col-md-8 text-left"><p>{{ userinfo.address }}</p></div>
            </div>
            <div class="row">
                    <div class="col-md-4 text-right"><p>个人简介:</p></div>
                    <div class="col-md-8 text-left"><p style="white-space:pre-wrap; width:260px; word-wrap:break-word;">{{ userinfo.aboutme }}</p></div>
            </div>
            <a href="{% url 'account:edit_my_information' %}"><button class="btn btn-primary" style="margin-top: 20px; margin-bottom: 20px">编辑个人信息</button></a>
        </div>
        <div class="col-md-6">
            <div style="margin-right:100px; margin-top: 20px; margin-bottom: 20px; border:1px solid #F60">
                {% if userinfo.photo %}
                <img src="{{ userinfo.photo | striptags }}" style="margin-bottom: 20px; margin-top: 20px" class="img-circle" id="my_photo" name="user_face">
                {% else %}
                <img name="user_face" src="{% static 'images/head.png' %}" style="margin-bottom: 20px; margin-top: 20px" class="img-circle" width='270px' id='my_photo'>
                {% endif %}
            </div>
            <div style="margin-right: 100px">
                <button class="btn btn-primary" style="margin-bottom: 20px; margin-top: 10px" id="upload_image" onclick="upload_image_layer()">上传照片</button>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript" src="{% static 'js/jquery-3.4.1.js' %}"></script>
<script type="text/javascript" src="{% static 'js/layer.js' %}"></script>
<script>
    function upload_image_layer(){
        layer.open({
            title: "上传头像",
            area: ['650px', '550px'],
            type: 2,
            content: "{% url 'account:my_image' %}"
        })
    }
</script>
{% endblock %}